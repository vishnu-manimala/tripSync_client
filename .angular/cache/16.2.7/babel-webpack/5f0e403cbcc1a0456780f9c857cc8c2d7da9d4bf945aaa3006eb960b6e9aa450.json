{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { Validators } from '@angular/forms';\nimport { UserRole } from 'src/app/models/auth.model';\nexport let LoginPasswordComponent = class LoginPasswordComponent {\n  constructor(_router, _loginForm, _authService, _jwt) {\n    this._router = _router;\n    this._loginForm = _loginForm;\n    this._authService = _authService;\n    this._jwt = _jwt;\n    this.error_message = \"\";\n    this.loginData = this._loginForm.group({\n      username: this._loginForm.control(\"\", Validators.compose([Validators.required, Validators.email])),\n      password: this._loginForm.control(\"\", Validators.compose([Validators.pattern('(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[$@$!%*?&])[A-Za-z\\d$@$!%*?&].{8,}'), Validators.required]))\n    });\n  }\n  login() {\n    console.log(this.loginData.value);\n    if (this.loginData.valid) {\n      this._authService.passwordLogin(this.loginData.value).subscribe(response => {\n        if (response.status === \"Success\") {\n          let role = response.data.isAdmin ? UserRole.Admin : UserRole.User;\n          this._jwt.setToken(response.token);\n          this._jwt.setRole(role);\n          this._jwt.setLocal(response.data);\n          console.log(\"success\");\n        }\n      });\n    } else {\n      console.log(\"not valid form\");\n      this.error_message = \"invalid credentials\";\n    }\n  }\n  navigateToRegister() {\n    this._router.navigate(['auth/register']);\n  }\n};\nLoginPasswordComponent = __decorate([Component({\n  selector: 'app-login-password',\n  templateUrl: './login-password.component.html',\n  styleUrls: ['./login-password.component.css']\n})], LoginPasswordComponent);","map":{"version":3,"names":["Component","Validators","UserRole","LoginPasswordComponent","constructor","_router","_loginForm","_authService","_jwt","error_message","loginData","group","username","control","compose","required","email","password","pattern","login","console","log","value","valid","passwordLogin","subscribe","response","status","role","data","isAdmin","Admin","User","setToken","token","setRole","setLocal","navigateToRegister","navigate","__decorate","selector","templateUrl","styleUrls"],"sources":["C:\\Users\\asus\\Desktop\\Share N Go\\client\\src\\app\\views\\auth\\login\\login-password\\login-password.component.ts"],"sourcesContent":["import { Component } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators,FormControl } from '@angular/forms';\nimport { Router } from '@angular/router';\nimport { UserRole } from 'src/app/models/auth.model';\nimport { AuthService } from 'src/app/services/auth.service';\nimport { JwtService } from 'src/app/services/jwt.service';\n\n@Component({\n  selector: 'app-login-password',\n  templateUrl: './login-password.component.html',\n  styleUrls: ['./login-password.component.css']\n})\nexport class LoginPasswordComponent {\n  loginData: FormGroup;\n  error_message: string = \"\";\nconstructor(private _router:Router,private _loginForm: FormBuilder, private _authService:AuthService, private _jwt:JwtService){\n\n  this.loginData = this._loginForm.group({\n    username: this._loginForm.control(\"\", Validators.compose([Validators.required, Validators.email])),\n    password: this._loginForm.control(\"\", Validators.compose([Validators.pattern('(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[$@$!%*?&])[A-Za-z\\d$@$!%*?&].{8,}'), Validators.required]))\n  })\n}\n\nlogin() {\n  console.log(this.loginData.value);\n  if (this.loginData.valid) {\n\n    this._authService.passwordLogin(this.loginData.value).subscribe((response: any) => {\n      if (response.status === \"Success\") {\n       let role: UserRole = response.data.isAdmin ? UserRole.Admin : UserRole.User;\n       this._jwt.setToken(response.token);\n       this._jwt.setRole(role);\n       this._jwt.setLocal(response.data);\n       console.log(\"success\");\n      }\n    })\n  } else {\n    console.log(\"not valid form\");\n    this.error_message = \"invalid credentials\"\n  }\n}\n\n\n\n\n\nnavigateToRegister(){\n    this._router.navigate(['auth/register']);\n  }\n\n}\n"],"mappings":";AAAA,SAASA,SAAS,QAAQ,eAAe;AACzC,SAAiCC,UAAU,QAAoB,gBAAgB;AAE/E,SAASC,QAAQ,QAAQ,2BAA2B;AAS7C,WAAMC,sBAAsB,GAA5B,MAAMA,sBAAsB;EAGnCC,YAAoBC,OAAc,EAASC,UAAuB,EAAUC,YAAwB,EAAUC,IAAe;IAAzG,KAAAH,OAAO,GAAPA,OAAO;IAAgB,KAAAC,UAAU,GAAVA,UAAU;IAAuB,KAAAC,YAAY,GAAZA,YAAY;IAAsB,KAAAC,IAAI,GAAJA,IAAI;IADhH,KAAAC,aAAa,GAAW,EAAE;IAG1B,IAAI,CAACC,SAAS,GAAG,IAAI,CAACJ,UAAU,CAACK,KAAK,CAAC;MACrCC,QAAQ,EAAE,IAAI,CAACN,UAAU,CAACO,OAAO,CAAC,EAAE,EAAEZ,UAAU,CAACa,OAAO,CAAC,CAACb,UAAU,CAACc,QAAQ,EAAEd,UAAU,CAACe,KAAK,CAAC,CAAC,CAAC;MAClGC,QAAQ,EAAE,IAAI,CAACX,UAAU,CAACO,OAAO,CAAC,EAAE,EAAEZ,UAAU,CAACa,OAAO,CAAC,CAACb,UAAU,CAACiB,OAAO,CAAC,0EAA0E,CAAC,EAAEjB,UAAU,CAACc,QAAQ,CAAC,CAAC;KAChL,CAAC;EACJ;EAEAI,KAAKA,CAAA;IACHC,OAAO,CAACC,GAAG,CAAC,IAAI,CAACX,SAAS,CAACY,KAAK,CAAC;IACjC,IAAI,IAAI,CAACZ,SAAS,CAACa,KAAK,EAAE;MAExB,IAAI,CAAChB,YAAY,CAACiB,aAAa,CAAC,IAAI,CAACd,SAAS,CAACY,KAAK,CAAC,CAACG,SAAS,CAAEC,QAAa,IAAI;QAChF,IAAIA,QAAQ,CAACC,MAAM,KAAK,SAAS,EAAE;UAClC,IAAIC,IAAI,GAAaF,QAAQ,CAACG,IAAI,CAACC,OAAO,GAAG5B,QAAQ,CAAC6B,KAAK,GAAG7B,QAAQ,CAAC8B,IAAI;UAC3E,IAAI,CAACxB,IAAI,CAACyB,QAAQ,CAACP,QAAQ,CAACQ,KAAK,CAAC;UAClC,IAAI,CAAC1B,IAAI,CAAC2B,OAAO,CAACP,IAAI,CAAC;UACvB,IAAI,CAACpB,IAAI,CAAC4B,QAAQ,CAACV,QAAQ,CAACG,IAAI,CAAC;UACjCT,OAAO,CAACC,GAAG,CAAC,SAAS,CAAC;;MAEzB,CAAC,CAAC;KACH,MAAM;MACLD,OAAO,CAACC,GAAG,CAAC,gBAAgB,CAAC;MAC7B,IAAI,CAACZ,aAAa,GAAG,qBAAqB;;EAE9C;EAMA4B,kBAAkBA,CAAA;IACd,IAAI,CAAChC,OAAO,CAACiC,QAAQ,CAAC,CAAC,eAAe,CAAC,CAAC;EAC1C;CAED;AAtCYnC,sBAAsB,GAAAoC,UAAA,EALlCvC,SAAS,CAAC;EACTwC,QAAQ,EAAE,oBAAoB;EAC9BC,WAAW,EAAE,iCAAiC;EAC9CC,SAAS,EAAE,CAAC,gCAAgC;CAC7C,CAAC,C,EACWvC,sBAAsB,CAsClC"},"metadata":{},"sourceType":"module","externalDependencies":[]}