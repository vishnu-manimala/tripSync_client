{"ast":null,"code":"import { flatMap } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nexport class VehicleService {\n  constructor(_http) {\n    this._http = _http;\n  }\n  getCarBrands(type) {\n    return this._http.get(`https://vpic.nhtsa.dot.gov/api/vehicles/GetMakesForVehicleType/${type}?format=json`);\n  }\n  saveVehicleData(data) {\n    return this._http.post('http://localhost:3001/vehicle/save.vehicle', data);\n  }\n  saveRegistrationData(data) {\n    return this._http.post('http://localhost:3001/vehicle/save.registration.data', data);\n  }\n  saveInsuranceData(data) {\n    return this._http.post('http://localhost:3001/vehicle/save.insurance.data', data);\n  }\n  saveVehiclePhoto(files) {\n    return this._http.post('http://localhost:3001/vehicle/save.vehicle.photos', files);\n  }\n  //to get all vehicles data added in profile\n  getVehiclesData() {\n    return this._http.get('http://localhost:3001/vehicle/get.vehicles.info').pipe(\n    // Use RxJS to map the response to an array of Vehicle objects\n    flatMap(response => {\n      return from(response) // Convert the array to an Observable\n      .pipe(map(vehicleData => {\n        // Parse the vehicle data into a Vehicle object\n        const vehicle = {\n          category: vehicleData.category,\n          userId: vehicleData.userId,\n          brand: vehicleData.brand,\n          model: vehicleData.model,\n          yearOfManufacture: vehicleData.yearOfManufacture,\n          color: vehicleData.color,\n          registration: {\n            registrationNumber: vehicleData.registration.registrationNumber,\n            expiryDate: new Date(vehicleData.registration.expiryDate)\n          },\n          insurance: {\n            insuranceCompany: vehicleData.insurance.insuranceCompany,\n            policyNumber: vehicleData.insurance.policyNumber,\n            expiryDate: new Date(vehicleData.insurance.expiryDate)\n          },\n          VehiclePhotos: vehicleData.VehiclePhotos,\n          ratingAndReview: vehicleData.ratingAndReview.map(review => {\n            return {\n              rating: review.rating,\n              review: review.review\n            };\n          }),\n          isBlocked: vehicleData.isBlocked,\n          isVerified: vehicleData.isVerified,\n          createdAt: new Date(vehicleData.createdAt),\n          updatedAt: new Date(vehicleData.updatedAt),\n          status: vehicleData.status\n        };\n        return vehicle;\n      }));\n    }));\n  }\n  static #_ = this.ɵfac = function VehicleService_Factory(t) {\n    return new (t || VehicleService)(i0.ɵɵinject(i1.HttpClient));\n  };\n  static #_2 = this.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: VehicleService,\n    factory: VehicleService.ɵfac,\n    providedIn: 'root'\n  });\n}","map":{"version":3,"names":["flatMap","VehicleService","constructor","_http","getCarBrands","type","get","saveVehicleData","data","post","saveRegistrationData","saveInsuranceData","saveVehiclePhoto","files","getVehiclesData","pipe","response","from","map","vehicleData","vehicle","category","userId","brand","model","yearOfManufacture","color","registration","registrationNumber","expiryDate","Date","insurance","insuranceCompany","policyNumber","VehiclePhotos","ratingAndReview","review","rating","isBlocked","isVerified","createdAt","updatedAt","status","_","i0","ɵɵinject","i1","HttpClient","_2","factory","ɵfac","providedIn"],"sources":["C:\\Users\\asus\\Desktop\\Share N Go\\client\\src\\app\\services\\vehicle.service.ts"],"sourcesContent":["import { HttpClient } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { FormGroup } from '@angular/forms';\nimport { Vehicle } from '../models/vehicle_response.model';\nimport { flatMap } from 'rxjs';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class VehicleService {\n\n  constructor(private _http:HttpClient) { }\n  getCarBrands(type: string){\n    return this._http.get(`https://vpic.nhtsa.dot.gov/api/vehicles/GetMakesForVehicleType/${type}?format=json`)\n  }\n\n  saveVehicleData(data:FormGroup){\n    return this._http.post('http://localhost:3001/vehicle/save.vehicle',data);\n  }\n\n  saveRegistrationData(data:FormGroup){\n    return this._http.post('http://localhost:3001/vehicle/save.registration.data',data);\n  }\n\n  saveInsuranceData(data:FormGroup){\n    return this._http.post('http://localhost:3001/vehicle/save.insurance.data',data);\n  }\n\n  saveVehiclePhoto(files: FormData){\n    return this._http.post('http://localhost:3001/vehicle/save.vehicle.photos',files);\n  }\n\n  //to get all vehicles data added in profile\n  getVehiclesData(): Observable<Vehicle[]>{\n    return this._http.get('http://localhost:3001/vehicle/get.vehicles.info')\n    .pipe(\n      // Use RxJS to map the response to an array of Vehicle objects\n      flatMap((response: any[]) => {\n        return from(response) // Convert the array to an Observable\n          .pipe(\n            map((vehicleData: any) => {\n              // Parse the vehicle data into a Vehicle object\n              const vehicle: Vehicle = {\n                category: vehicleData.category,\n                userId: vehicleData.userId,\n                brand: vehicleData.brand,\n                model: vehicleData.model,\n                yearOfManufacture: vehicleData.yearOfManufacture,\n                color: vehicleData.color,\n                registration: {\n                  registrationNumber: vehicleData.registration.registrationNumber,\n                  expiryDate: new Date(vehicleData.registration.expiryDate),\n                },\n                insurance: {\n                  insuranceCompany: vehicleData.insurance.insuranceCompany,\n                  policyNumber: vehicleData.insurance.policyNumber,\n                  expiryDate: new Date(vehicleData.insurance.expiryDate),\n                },\n                VehiclePhotos: vehicleData.VehiclePhotos,\n                ratingAndReview: vehicleData.ratingAndReview.map((review: any) => {\n                  return {\n                    rating: review.rating,\n                    review: review.review,\n                  };\n                }),\n                isBlocked: vehicleData.isBlocked,\n                isVerified: vehicleData.isVerified,\n                createdAt: new Date(vehicleData.createdAt),\n                updatedAt: new Date(vehicleData.updatedAt),\n                status: vehicleData.status,\n              };\n\n              return vehicle;\n            })\n          );\n      })\n    );\n  }\n\n}\n"],"mappings":"AAIA,SAASA,OAAO,QAAQ,MAAM;;;AAK9B,OAAM,MAAOC,cAAc;EAEzBC,YAAoBC,KAAgB;IAAhB,KAAAA,KAAK,GAALA,KAAK;EAAe;EACxCC,YAAYA,CAACC,IAAY;IACvB,OAAO,IAAI,CAACF,KAAK,CAACG,GAAG,CAAC,kEAAkED,IAAI,cAAc,CAAC;EAC7G;EAEAE,eAAeA,CAACC,IAAc;IAC5B,OAAO,IAAI,CAACL,KAAK,CAACM,IAAI,CAAC,4CAA4C,EAACD,IAAI,CAAC;EAC3E;EAEAE,oBAAoBA,CAACF,IAAc;IACjC,OAAO,IAAI,CAACL,KAAK,CAACM,IAAI,CAAC,sDAAsD,EAACD,IAAI,CAAC;EACrF;EAEAG,iBAAiBA,CAACH,IAAc;IAC9B,OAAO,IAAI,CAACL,KAAK,CAACM,IAAI,CAAC,mDAAmD,EAACD,IAAI,CAAC;EAClF;EAEAI,gBAAgBA,CAACC,KAAe;IAC9B,OAAO,IAAI,CAACV,KAAK,CAACM,IAAI,CAAC,mDAAmD,EAACI,KAAK,CAAC;EACnF;EAEA;EACAC,eAAeA,CAAA;IACb,OAAO,IAAI,CAACX,KAAK,CAACG,GAAG,CAAC,iDAAiD,CAAC,CACvES,IAAI;IACH;IACAf,OAAO,CAAEgB,QAAe,IAAI;MAC1B,OAAOC,IAAI,CAACD,QAAQ,CAAC,CAAC;MAAA,CACnBD,IAAI,CACHG,GAAG,CAAEC,WAAgB,IAAI;QACvB;QACA,MAAMC,OAAO,GAAY;UACvBC,QAAQ,EAAEF,WAAW,CAACE,QAAQ;UAC9BC,MAAM,EAAEH,WAAW,CAACG,MAAM;UAC1BC,KAAK,EAAEJ,WAAW,CAACI,KAAK;UACxBC,KAAK,EAAEL,WAAW,CAACK,KAAK;UACxBC,iBAAiB,EAAEN,WAAW,CAACM,iBAAiB;UAChDC,KAAK,EAAEP,WAAW,CAACO,KAAK;UACxBC,YAAY,EAAE;YACZC,kBAAkB,EAAET,WAAW,CAACQ,YAAY,CAACC,kBAAkB;YAC/DC,UAAU,EAAE,IAAIC,IAAI,CAACX,WAAW,CAACQ,YAAY,CAACE,UAAU;WACzD;UACDE,SAAS,EAAE;YACTC,gBAAgB,EAAEb,WAAW,CAACY,SAAS,CAACC,gBAAgB;YACxDC,YAAY,EAAEd,WAAW,CAACY,SAAS,CAACE,YAAY;YAChDJ,UAAU,EAAE,IAAIC,IAAI,CAACX,WAAW,CAACY,SAAS,CAACF,UAAU;WACtD;UACDK,aAAa,EAAEf,WAAW,CAACe,aAAa;UACxCC,eAAe,EAAEhB,WAAW,CAACgB,eAAe,CAACjB,GAAG,CAAEkB,MAAW,IAAI;YAC/D,OAAO;cACLC,MAAM,EAAED,MAAM,CAACC,MAAM;cACrBD,MAAM,EAAEA,MAAM,CAACA;aAChB;UACH,CAAC,CAAC;UACFE,SAAS,EAAEnB,WAAW,CAACmB,SAAS;UAChCC,UAAU,EAAEpB,WAAW,CAACoB,UAAU;UAClCC,SAAS,EAAE,IAAIV,IAAI,CAACX,WAAW,CAACqB,SAAS,CAAC;UAC1CC,SAAS,EAAE,IAAIX,IAAI,CAACX,WAAW,CAACsB,SAAS,CAAC;UAC1CC,MAAM,EAAEvB,WAAW,CAACuB;SACrB;QAED,OAAOtB,OAAO;MAChB,CAAC,CAAC,CACH;IACL,CAAC,CAAC,CACH;EACH;EAAC,QAAAuB,CAAA,G;qBApEU1C,cAAc,EAAA2C,EAAA,CAAAC,QAAA,CAAAC,EAAA,CAAAC,UAAA;EAAA;EAAA,QAAAC,EAAA,G;WAAd/C,cAAc;IAAAgD,OAAA,EAAdhD,cAAc,CAAAiD,IAAA;IAAAC,UAAA,EAFb;EAAM"},"metadata":{},"sourceType":"module","externalDependencies":[]}