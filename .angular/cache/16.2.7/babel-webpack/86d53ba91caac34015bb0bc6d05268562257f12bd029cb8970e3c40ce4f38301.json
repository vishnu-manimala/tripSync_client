{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { Validators } from '@angular/forms';\nimport { UserRole } from 'src/app/models/auth.model';\nexport let LoginPasswordComponent = class LoginPasswordComponent {\n  constructor(_router, _loginForm, _authService, _jwt) {\n    this._router = _router;\n    this._loginForm = _loginForm;\n    this._authService = _authService;\n    this._jwt = _jwt;\n    this.error_message = \"\";\n    this.imageUrl = '../../../assets/tp.png';\n    this.loginData = this._loginForm.group({\n      username: this._loginForm.control(\"\", Validators.compose([Validators.required, Validators.email])),\n      password: this._loginForm.control(\"\", Validators.compose([Validators.pattern('(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[$@$!%*?&])[A-Za-z\\d$@$!%*?&].{8,}'), Validators.required]))\n    });\n  }\n  login() {\n    console.log(this.loginData.value);\n    if (this.loginData.valid) {\n      this._authService.passwordLogin(this.loginData.value).subscribe(response => {\n        if (response.status === \"Success\") {\n          console.log(response);\n          let role = response.data.isAdmin ? UserRole.Admin : UserRole.User;\n          this._jwt.setToken(response.token);\n          this._jwt.setRole(role);\n          this._jwt.setLocal(response.data);\n          console.log(\"success\");\n          this._router.navigate(['user']);\n        } else {\n          this.error_message = \"something went wrong\";\n          this._router.navigate(['auth/login.password']);\n        }\n      });\n    } else {\n      console.log(\"not valid form\");\n      this.error_message = \"invalid credentials\";\n    }\n  }\n  navigation() {\n    this._router.navigate(['auth/register']);\n  }\n};\nLoginPasswordComponent = __decorate([Component({\n  selector: 'app-login-password',\n  templateUrl: './login-password.component.html',\n  styleUrls: ['./login-password.component.css']\n})], LoginPasswordComponent);","map":{"version":3,"names":["Component","Validators","UserRole","LoginPasswordComponent","constructor","_router","_loginForm","_authService","_jwt","error_message","imageUrl","loginData","group","username","control","compose","required","email","password","pattern","login","console","log","value","valid","passwordLogin","subscribe","response","status","role","data","isAdmin","Admin","User","setToken","token","setRole","setLocal","navigate","navigation","__decorate","selector","templateUrl","styleUrls"],"sources":["C:\\Users\\asus\\Desktop\\Share N Go\\client\\src\\app\\views\\auth\\login\\login-password\\login-password.component.ts"],"sourcesContent":["import { Component } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators,FormControl } from '@angular/forms';\nimport { Router } from '@angular/router';\nimport { UserRole } from 'src/app/models/auth.model';\nimport { AuthService } from 'src/app/services/auth.service';\nimport { JwtService } from 'src/app/services/jwt.service';\n\n@Component({\n  selector: 'app-login-password',\n  templateUrl: './login-password.component.html',\n  styleUrls: ['./login-password.component.css']\n})\nexport class LoginPasswordComponent {\n  loginData: FormGroup;\n  error_message: string = \"\";\n  imageUrl:string = '../../../assets/tp.png'\nconstructor(private _router:Router,private _loginForm: FormBuilder, private _authService:AuthService, private _jwt:JwtService){\n\n  this.loginData = this._loginForm.group({\n    username: this._loginForm.control(\"\", Validators.compose([Validators.required, Validators.email])),\n    password: this._loginForm.control(\"\", Validators.compose([Validators.pattern('(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[$@$!%*?&])[A-Za-z\\d$@$!%*?&].{8,}'), Validators.required]))\n  })\n}\n\nlogin() {\n  console.log(this.loginData.value);\n  if (this.loginData.valid) {\n\n    this._authService.passwordLogin(this.loginData.value).subscribe((response: any) => {\n      if (response.status === \"Success\") {\n        console.log(response)\n       let role: UserRole = response.data.isAdmin ? UserRole.Admin : UserRole.User;\n       this._jwt.setToken(response.token);\n       this._jwt.setRole(role);\n       this._jwt.setLocal(response.data);\n       console.log(\"success\");\n       this._router.navigate(['user'])\n      }else {\n        this.error_message = \"something went wrong\"\n        this._router.navigate(['auth/login.password']);\n      }\n    })\n  } else {\n    console.log(\"not valid form\");\n    this.error_message = \"invalid credentials\"\n  }\n}\n\n\n\n\n\nnavigation(){\n    this._router.navigate(['auth/register']);\n  }\n\n}\n"],"mappings":";AAAA,SAASA,SAAS,QAAQ,eAAe;AACzC,SAAiCC,UAAU,QAAoB,gBAAgB;AAE/E,SAASC,QAAQ,QAAQ,2BAA2B;AAS7C,WAAMC,sBAAsB,GAA5B,MAAMA,sBAAsB;EAInCC,YAAoBC,OAAc,EAASC,UAAuB,EAAUC,YAAwB,EAAUC,IAAe;IAAzG,KAAAH,OAAO,GAAPA,OAAO;IAAgB,KAAAC,UAAU,GAAVA,UAAU;IAAuB,KAAAC,YAAY,GAAZA,YAAY;IAAsB,KAAAC,IAAI,GAAJA,IAAI;IAFhH,KAAAC,aAAa,GAAW,EAAE;IAC1B,KAAAC,QAAQ,GAAU,wBAAwB;IAG1C,IAAI,CAACC,SAAS,GAAG,IAAI,CAACL,UAAU,CAACM,KAAK,CAAC;MACrCC,QAAQ,EAAE,IAAI,CAACP,UAAU,CAACQ,OAAO,CAAC,EAAE,EAAEb,UAAU,CAACc,OAAO,CAAC,CAACd,UAAU,CAACe,QAAQ,EAAEf,UAAU,CAACgB,KAAK,CAAC,CAAC,CAAC;MAClGC,QAAQ,EAAE,IAAI,CAACZ,UAAU,CAACQ,OAAO,CAAC,EAAE,EAAEb,UAAU,CAACc,OAAO,CAAC,CAACd,UAAU,CAACkB,OAAO,CAAC,0EAA0E,CAAC,EAAElB,UAAU,CAACe,QAAQ,CAAC,CAAC;KAChL,CAAC;EACJ;EAEAI,KAAKA,CAAA;IACHC,OAAO,CAACC,GAAG,CAAC,IAAI,CAACX,SAAS,CAACY,KAAK,CAAC;IACjC,IAAI,IAAI,CAACZ,SAAS,CAACa,KAAK,EAAE;MAExB,IAAI,CAACjB,YAAY,CAACkB,aAAa,CAAC,IAAI,CAACd,SAAS,CAACY,KAAK,CAAC,CAACG,SAAS,CAAEC,QAAa,IAAI;QAChF,IAAIA,QAAQ,CAACC,MAAM,KAAK,SAAS,EAAE;UACjCP,OAAO,CAACC,GAAG,CAACK,QAAQ,CAAC;UACtB,IAAIE,IAAI,GAAaF,QAAQ,CAACG,IAAI,CAACC,OAAO,GAAG7B,QAAQ,CAAC8B,KAAK,GAAG9B,QAAQ,CAAC+B,IAAI;UAC3E,IAAI,CAACzB,IAAI,CAAC0B,QAAQ,CAACP,QAAQ,CAACQ,KAAK,CAAC;UAClC,IAAI,CAAC3B,IAAI,CAAC4B,OAAO,CAACP,IAAI,CAAC;UACvB,IAAI,CAACrB,IAAI,CAAC6B,QAAQ,CAACV,QAAQ,CAACG,IAAI,CAAC;UACjCT,OAAO,CAACC,GAAG,CAAC,SAAS,CAAC;UACtB,IAAI,CAACjB,OAAO,CAACiC,QAAQ,CAAC,CAAC,MAAM,CAAC,CAAC;SAC/B,MAAK;UACJ,IAAI,CAAC7B,aAAa,GAAG,sBAAsB;UAC3C,IAAI,CAACJ,OAAO,CAACiC,QAAQ,CAAC,CAAC,qBAAqB,CAAC,CAAC;;MAElD,CAAC,CAAC;KACH,MAAM;MACLjB,OAAO,CAACC,GAAG,CAAC,gBAAgB,CAAC;MAC7B,IAAI,CAACb,aAAa,GAAG,qBAAqB;;EAE9C;EAMA8B,UAAUA,CAAA;IACN,IAAI,CAAClC,OAAO,CAACiC,QAAQ,CAAC,CAAC,eAAe,CAAC,CAAC;EAC1C;CAED;AA5CYnC,sBAAsB,GAAAqC,UAAA,EALlCxC,SAAS,CAAC;EACTyC,QAAQ,EAAE,oBAAoB;EAC9BC,WAAW,EAAE,iCAAiC;EAC9CC,SAAS,EAAE,CAAC,gCAAgC;CAC7C,CAAC,C,EACWxC,sBAAsB,CA4ClC"},"metadata":{},"sourceType":"module","externalDependencies":[]}